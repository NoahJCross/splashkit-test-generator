{
  "group": "json",
  "constructor": [
    {
      "step_type": "function",
      "function_name": "set_resources_path",
      "args": [
        {
          "value_type": "string",
          "value": "set this value before running tests, use an absolute path"
        }
      ]
    }
  ],
  "cleanup": [
    {
      "cleanup_type": "json",
      "function_name": "free_all_json",
      "args": []
    }
  ],
  "tests": [
    {
      "name": "create_json",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "not_null",
            "value1": {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          }
        }
      ]
    },
    {
      "name": "create_json_from_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json_from_string",
          "args": [
            {
              "value_type": "string",
              "value": "{\\\"name\\\":\\\"John\\\",\\\"age\\\":30,\\\"city\\\":\\\"New York\\\"}"
            }
          ],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "name"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "John"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "name"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "free_all_json",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json1"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json2"
        },
        {
          "step_type": "function",
          "function_name": "json_count_keys",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            }
          ],
          "store_result": "count1"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            },
            {
              "value_type": "string",
              "value": "key"
            },
            {
              "value_type": "string",
              "value": "value"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            },
            {
              "value_type": "string",
              "value": "key"
            },
            {
              "value_type": "string",
              "value": "value"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_count_keys",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            }
          ],
          "store_result": "count2"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 0
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "count1"
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "greater_than",
            "value1": {
              "value_type": "int",
              "value": 0
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "count2"
            }
          }
        },
        {
          "step_type": "function",
          "function_name": "free_all_json",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "json_count_keys",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            }
          ],
          "store_result": "count1_after_free"
        },
        {
          "step_type": "function",
          "function_name": "json_count_keys",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            }
          ],
          "store_result": "count2_after_free"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 0
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "count1_after_free"
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 0
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "count2_after_free"
            }
          }
        }
      ]
    },
    {
      "name": "free_json",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "key"
            },
            {
              "value_type": "string",
              "value": "value"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "free_json",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_count_keys",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "key1"
            },
            {
              "value_type": "string",
              "value": "value1"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_integer",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "key2"
            },
            {
              "value_type": "int",
              "value": 42
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_count_keys",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          ],
          "store_result": "key_count"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 2
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "key_count"
            }
          }
        }
      ]
    },
    {
      "name": "json_from_color",
      "steps": [
        {
          "step_type": "function",
          "function_name": "color_bright_green",
          "args": [],
          "store_result": "test_color"
        },
        {
          "step_type": "function",
          "function_name": "json_from_color",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_color"
            }
          ],
          "store_result": "test_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "color"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "#00ff00ff"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "color"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_from_file",
      "steps": [
        {
          "step_type": "function",
          "function_name": "json_from_file",
          "args": [
            {
              "value_type": "string",
              "value": "person.json"
            }
          ],
          "store_result": "test_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "not_null",
            "value1": {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          }
        },
        {
          "step_type": "function",
          "function_name": "json_read_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "firstName"
            }
          ],
          "store_result": "test_value"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "John"
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "test_value"
            }
          }
        }
      ]
    },
    {
      "name": "json_from_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "json_from_string",
          "args": [
            {
              "value_type": "string",
              "value": "{\\\"name\\\":\\\"John\\\",\\\"age\\\":30,\\\"city\\\":\\\"New York\\\"}"
            }
          ],
          "store_result": "test_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "John"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "name"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 30
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_number_as_int",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "age"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "New York"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "city"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_has_key",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "key1"
            },
            {
              "value_type": "string",
              "value": "value1"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "key1"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "key2"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_read_array_of_double",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "numbers"
            },
            {
              "value_type": "list",
              "target_type": "double",
              "value": [
                {
                  "value_type": "double",
                  "value": 1.1
                },
                {
                  "value_type": "double",
                  "value": 2.2
                },
                {
                  "value_type": "double",
                  "value": 3.3
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "double",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "numbers"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 1.1
            },
            "value2": {
              "value_type": "array_access",
              "array_name": "out_result",
              "index": 0
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 2.2
            },
            "value2": {
              "value_type": "array_access",
              "array_name": "out_result",
              "index": 1
            }
          }
        }
      ]
    },
    {
      "name": "json_read_array_of_json",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json1"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json2"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            },
            {
              "value_type": "string",
              "value": "key1"
            },
            {
              "value_type": "string",
              "value": "value1"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            },
            {
              "value_type": "string",
              "value": "key2"
            },
            {
              "value_type": "string",
              "value": "value2"
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "test_json_array",
          "target_type": "json",
          "value_type": "list",
          "value": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            },
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_json",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "array_key"
            },
            {
              "value_type": "variable",
              "variable_name": "test_json_array"
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "json",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_json",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "array_key"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 2
            },
            "value2": {
              "value_type": "size",
              "variable_name": "out_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_read_array_of_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_array"
            },
            {
              "value_type": "list",
              "target_type": "string",
              "value": [
                {
                  "value_type": "string",
                  "value": "item1"
                },
                {
                  "value_type": "string",
                  "value": "item2"
                },
                {
                  "value_type": "string",
                  "value": "item3"
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "string",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_array"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 3
            },
            "value2": {
              "value_type": "size",
              "variable_name": "out_result"
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "item1"
            },
            "value2": {
              "value_type": "array_access",
              "array_name": "out_result",
              "index": 0
            }
          }
        }
      ]
    },
    {
      "name": "json_read_array_of_bool",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "list",
              "target_type": "bool",
              "value": [
                {
                  "value_type": "int",
                  "value": true
                },
                {
                  "value_type": "int",
                  "value": false
                },
                {
                  "value_type": "int",
                  "value": true
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "bool",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 3
            },
            "value2": {
              "value_type": "size",
              "variable_name": "out_result"
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "array_access",
              "array_name": "out_result",
              "index": 0
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "array_access",
              "array_name": "out_result",
              "index": 1
            }
          }
        }
      ]
    },
    {
      "name": "json_read_bool",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "bool",
              "value": true
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_read_bool",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        },
        {
          "step_type": "function",
          "function_name": "json_set_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "bool",
              "value": false
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "json_read_bool",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_read_number",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_float",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "float",
              "value": 42.5
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_read_number",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            }
          ],
          "store_result": "test_result"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 42.5
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "test_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_read_number_as_double",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "double",
              "value": 3.14
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_read_number_as_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            }
          ],
          "store_result": "test_result"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 3.14
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "test_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_read_number_as_int",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_integer",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "int",
              "value": 42
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_read_number_as_int",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            }
          ],
          "store_result": "test_result"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 42
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "test_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_read_object",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_object",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "nestedObject"
            },
            {
              "value_type": "function",
              "function_name": "create_json",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_read_object",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "nestedObject"
            }
          ],
          "store_result": "read_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "not_null",
            "value1": {
              "value_type": "variable",
              "variable_name": "read_json"
            }
          }
        }
      ]
    },
    {
      "name": "json_read_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "string",
              "value": "test_value"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_read_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            }
          ],
          "store_result": "read_value"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "test_value"
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "read_value"
            }
          }
        }
      ]
    },
    {
      "name": "json_set_array_of_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "list",
              "target_type": "string",
              "value": [
                {
                  "value_type": "string",
                  "value": "value1"
                },
                {
                  "value_type": "string",
                  "value": "value2"
                },
                {
                  "value_type": "string",
                  "value": "value3"
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "string",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "list",
              "target_type": "string",
              "value": [
                {
                  "value_type": "string",
                  "value": "value1"
                },
                {
                  "value_type": "string",
                  "value": "value2"
                },
                {
                  "value_type": "string",
                  "value": "value3"
                }
              ]
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "out_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_set_array_of_double",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "numbers"
            },
            {
              "value_type": "list",
              "target_type": "double",
              "value": [
                {
                  "value_type": "double",
                  "value": 1.1
                },
                {
                  "value_type": "double",
                  "value": 2.2
                },
                {
                  "value_type": "double",
                  "value": 3.3
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "double",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "numbers"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "list",
              "target_type": "double",
              "value": [
                {
                  "value_type": "double",
                  "value": 1.1
                },
                {
                  "value_type": "double",
                  "value": 2.2
                },
                {
                  "value_type": "double",
                  "value": 3.3
                }
              ]
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "out_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_set_array_of_bool",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "list",
              "target_type": "bool",
              "value": [
                {
                  "value_type": "int",
                  "value": true
                },
                {
                  "value_type": "int",
                  "value": false
                }
              ]
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "target_type": "bool",
          "value_type": "list",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "list",
              "target_type": "bool",
              "value": [
                {
                  "value_type": "int",
                  "value": true
                },
                {
                  "value_type": "int",
                  "value": false
                }
              ]
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "out_result"
            }
          }
        }
      ]
    },
    {
      "name": "json_set_array_of_json",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json1"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json2"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            },
            {
              "value_type": "string",
              "value": "key1"
            },
            {
              "value_type": "string",
              "value": "value1"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            },
            {
              "value_type": "string",
              "value": "key2"
            },
            {
              "value_type": "string",
              "value": "value2"
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "test_json_array",
          "value_type": "list",
          "target_type": "json",
          "value": [
            {
              "value_type": "variable",
              "variable_name": "test_json1"
            },
            {
              "value_type": "variable",
              "variable_name": "test_json2"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_set_array_of_json",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "array_key"
            },
            {
              "value_type": "variable",
              "variable_name": "test_json_array"
            }
          ]
        },
        {
          "step_type": "variable",
          "variable_name": "out_result",
          "value_type": "list",
          "target_type": "json",
          "value": [],
          "is_mutable": true
        },
        {
          "step_type": "function",
          "function_name": "json_read_array_of_json",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "array_key"
            },
            {
              "value_type": "ref",
              "variable_name": "out_result"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "value1"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "array_access",
                  "array_name": "out_result",
                  "index": 0
                },
                {
                  "value_type": "string",
                  "value": "key1"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "value2"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "array_access",
                  "array_name": "out_result",
                  "index": 1
                },
                {
                  "value_type": "string",
                  "value": "key2"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_bool",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_bool",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "bool",
              "value": true
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_read_bool",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_number_integer",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_integer",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "age"
            },
            {
              "value_type": "int",
              "value": 30
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "int",
              "value": 30
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_number_as_int",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "age"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_number_double",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_double",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "double",
              "value": 3.14
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 3.14
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_number_as_double",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_number_float",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_number_float",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "float",
              "value": 3.14
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "double",
              "value": 3.140000104904175
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_number",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_object",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_nested_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_object",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "nested"
            },
            {
              "value_type": "variable",
              "variable_name": "test_nested_json"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "json_has_key",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "nested"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_set_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test_key"
            },
            {
              "value_type": "string",
              "value": "test_value"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "test_value"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_json"
                },
                {
                  "value_type": "string",
                  "value": "test_key"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_to_color",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "color"
            },
            {
              "value_type": "string",
              "value": "#ff0000ff"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_to_color",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          ],
          "store_result": "test_color"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "#ff0000ff"
            },
            "value2": {
              "value_type": "function",
              "function_name": "color_to_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_color"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_to_file",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "testKey"
            },
            {
              "value_type": "string",
              "value": "testValue"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_to_file",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "test.json"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_from_file",
          "args": [
            {
              "value_type": "string",
              "value": "test.json"
            }
          ],
          "store_result": "loaded_json"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "string",
              "value": "testValue"
            },
            "value2": {
              "value_type": "function",
              "function_name": "json_read_string",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "loaded_json"
                },
                {
                  "value_type": "string",
                  "value": "testKey"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "json_to_string",
      "steps": [
        {
          "step_type": "function",
          "function_name": "create_json",
          "args": [],
          "store_result": "test_json"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "json",
          "store_result": "cleanup_json"
        },
        {
          "step_type": "function",
          "function_name": "json_set_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            },
            {
              "value_type": "string",
              "value": "key"
            },
            {
              "value_type": "string",
              "value": "value"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "json_to_string",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_json"
            }
          ],
          "store_result": "test_json_string"
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "string",
              "value": ""
            },
            "value2": {
              "value_type": "variable",
              "variable_name": "test_json_string"
            }
          }
        }
      ]
    }
  ]
}
