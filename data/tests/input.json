{
  "group": "input",
  "constructor": [
    {
      "step_type": "function",
      "function_name": "set_resources_path",
      "args": [
        {
          "value_type": "string",
          "value": "set this value before running tests, use an absolute path"
        }
      ]
    }
  ],
  "cleanup": [
    {
      "cleanup_type": "window",
      "function_name": "close_all_windows",
      "args": []
    },
    {
      "cleanup_type": "font",
      "function_name": "free_all_fonts",
      "args": []
    }
  ],
  "tests": [
    {
      "name": "process_events",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 1"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: process_events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_clicked",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: process_events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Click left mouse button to test events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Clicked: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_clicked",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "quit_requested",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 2"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "quit_requested",
              "args": []
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: quit_requested"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Close window to test quit requested"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Quit Requested: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "quit_requested",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "reset_quit",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 3"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "quit_requested",
              "args": []
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: reset_quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Close window to test reset quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Quit Requested: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "quit_requested",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "reset_quit",
          "args": []
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: reset_quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test after reset quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "any_key_pressed",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 4"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "any_key_pressed",
              "args": []
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: any_key_pressed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press any key to test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Any Key Pressed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "any_key_pressed",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "any_key_pressed",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_down",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 5"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_down",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_down"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_down"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_down"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_down",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_down"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press B to test deregistered callback on key down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_down"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 90.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_typed",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 6"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_typed"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_typed"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press B to test deregistered callback on key typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_typed"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 90.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_up",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 7"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_up",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_up"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_up"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and release A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_up"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_up",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_up"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: deregister_callback_on_key_up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and release B to test deregistered callback on key up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_up"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 90.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "key_down",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 8"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and hold A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "key_name",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 9"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test key name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Name: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_typed"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Enter to test key name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Name: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_typed"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        }
      ]
    },
    {
      "name": "key_released",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 10"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_released",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_released"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Released: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_released",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "key_typed",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 11"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test key typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "key_up",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 12"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: key_up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_down",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 13"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_down",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_down"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_down"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: register_callback_on_key_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test callback on key down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_down"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_down",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_down"
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_typed",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 14"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_typed"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: register_callback_on_key_typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press A to test callback on key typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_typed"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_typed",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_typed"
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_up",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 15"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_up",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_up"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "get_key_up"
            },
            "value2": {
              "value_type": "enum",
              "enum_type": "key_code",
              "value": "a_key"
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: register_callback_on_key_up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and release A to test callback on key up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "method_call",
                            "variable_name": "callbacks",
                            "method_name": "get_key_up"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_up",
          "args": [
            {
              "value_type": "method_call",
              "variable_name": "callbacks",
              "method_name": "on_key_up"
            }
          ]
        }
      ]
    },
    {
      "name": "hide_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 16"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: hide_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "hide_mouse",
          "args": []
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: hide_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        }
      ]
    },
    {
      "name": "mouse_clicked",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 17"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_clicked",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_clicked"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Click left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Clicked: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_clicked",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_down",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 18"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press and hold left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_down"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Release left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_movement",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 19"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_movement",
              "args": [],
              "store_result": "movement"
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_movement"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Move mouse to test movement"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Movement: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "movement",
                        "variable_field": "x"
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "movement",
                        "variable_field": "y"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_position",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 20"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_position",
              "args": [],
              "store_result": "position"
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Move mouse to test position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "position",
                        "variable_field": "x"
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "position",
                        "variable_field": "y"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_position_vector",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 21"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_position_vector",
              "args": [],
              "store_result": "position"
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_position_vector"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Move mouse to test position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "position",
                        "variable_field": "x"
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "position",
                        "variable_field": "y"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_shown",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 22"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_shown"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "hide_mouse",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_shown",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_shown"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_shown",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "mouse_up",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 23"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_up"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Click and release left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_wheel_scroll",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 24"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_wheel_scroll",
              "args": [],
              "store_result": "scroll"
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_wheel_scroll"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Scroll mouse wheel to test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Scroll Value: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "scroll",
                        "variable_field": "x"
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "scroll",
                        "variable_field": "y"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_x",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 25"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_x"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Move mouse to test X position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_y",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 26"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: mouse_y"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Move mouse to test Y position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "move_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 27"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "m_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: move_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press M to move mouse to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: move_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Mouse moved to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "move_mouse",
              "args": [
                {
                  "value_type": "double",
                  "value": 400.0
                },
                {
                  "value_type": "double",
                  "value": 300.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "move_mouse_to_point",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 28"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "m_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: move_mouse_to_point"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press M to move mouse to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: move_mouse_to_point"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Mouse moved to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "move_mouse_to_point",
              "args": [
                {
                  "value_type": "function",
                  "function_name": "point_at",
                  "args": [
                    {
                      "value_type": "double",
                      "value": 400.0
                    },
                    {
                      "value_type": "double",
                      "value": 300.0
                    }
                  ]
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "show_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 29"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "hide_mouse",
          "args": []
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: show_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: show_mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "show_mouse_with_boolean",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 30"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: show_mouse_with_boolean"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse_with_boolean",
          "args": [
            {
              "value_type": "bool",
              "value": false
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_shown",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: show_mouse_with_boolean"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse_with_boolean",
          "args": [
            {
              "value_type": "bool",
              "value": true
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_shown",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "draw_collected_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 31"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "load_font",
          "args": [
            {
              "value_type": "string",
              "value": "test_font"
            },
            {
              "value_type": "string",
              "value": "hara.ttf"
            }
          ],
          "store_result": "test_font"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "font",
          "store_result": "cleanup_font"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 200.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: draw_collected_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_collected_text",
              "args": [
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "variable",
                  "variable_name": "test_font"
                },
                {
                  "value_type": "int",
                  "value": 18
                },
                {
                  "value_type": "function",
                  "function_name": "option_defaults",
                  "args": []
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        }
      ]
    },
    {
      "name": "end_reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 32"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 200.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: end_reading_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: end_reading_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Text input ended"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "end_reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 33"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rectangle"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rectangle"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: end_reading_text_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: end_reading_text_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Text input ended"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        }
      ]
    },
    {
      "name": "reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 34"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 200.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: reading_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 35"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rectangle"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rectangle"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text_in_window",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_window"
                }
              ]
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: reading_text_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text_in_window",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_window"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "start_reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 36"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: start_reading_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "start_reading_text_with_initial_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 37"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_with_initial_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            },
            {
              "value_type": "string",
              "value": "Initial Text"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: start_reading_text_with_initial_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "start_reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 38"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: start_reading_text_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "start_reading_text_in_window_with_initial_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 39"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window_with_initial_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            },
            {
              "value_type": "string",
              "value": "Initial Text"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: start_reading_text_in_window_with_initial_text"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "false",
            "value1": {
              "value_type": "function",
              "function_name": "reading_text",
              "args": []
            }
          }
        }
      ]
    },
    {
      "name": "text_entry_cancelled",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 40"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 200.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: text_entry_cancelled"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Escape to cancel text entry"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Text Entry Cancelled: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_entry_cancelled",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        }
      ]
    },
    {
      "name": "text_entry_cancelled_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 41"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: text_entry_cancelled_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press Escape to cancel text entry"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Text Entry Cancelled: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_entry_cancelled_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Press space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 70.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "assertion",
          "compare": {
            "compare_type": "true",
            "value1": {
              "value_type": "function",
              "function_name": "text_entry_cancelled_in_window",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_window"
                }
              ]
            }
          }
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "text_input",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 42"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ]
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 100.0
                },
                {
                  "value_type": "double",
                  "value": 200.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: text_input"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        }
      ]
    },
    {
      "name": "text_input_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "string",
              "value": "Test Window 43"
            },
            {
              "value_type": "int",
              "value": 800
            },
            {
              "value_type": "int",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "cleanup",
          "cleanup_type": "window",
          "store_result": "cleanup_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 100.0
            },
            {
              "value_type": "double",
              "value": 200.0
            },
            {
              "value_type": "double",
              "value": 30.0
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "return_key"
                }
              ]
            },
            "value2": {
              "value_type": "bool",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen_to_white",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Test: text_input_in_window"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 10.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "string",
                  "value": "Type some text, press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 30.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text_no_font_no_size",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "double",
                  "value": 10.0
                },
                {
                  "value_type": "double",
                  "value": 50.0
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    }
  ]
}
