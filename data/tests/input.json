{
  "group": "input",
  "tests": [
    {
      "name": "process_events",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_clicked",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },

          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Click left mouse button to test events"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Clicked: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_clicked",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "quit_requested",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "quit_requested",
              "args": []
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Escape to test quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Quit Requested: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "quit_requested",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "reset_quit",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "quit_requested",
              "args": []
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Escape to test quit"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Quit Requested: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "quit_requested",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "reset_quit",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to continue after reset"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "any_key_pressed",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "any_key_pressed",
              "args": []
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press any key to test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Any Key Pressed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "any_key_pressed",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_down",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_down",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_down"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_down"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "deregister_callback_on_key_down",
              "args": [
                {
                  "value_type": "variable_field",
                  "variable_name": "callbacks",
                  "variable_field": "on_key_down"
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "b_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press B to test deregistered callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_down"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_typed",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_typed",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_typed"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "deregister_callback_on_key_typed",
              "args": [
                {
                  "value_type": "variable_field",
                  "variable_name": "callbacks",
                  "variable_field": "on_key_typed"
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "b_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press B to test deregistered callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_typed"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "deregister_callback_on_key_up",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_up",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_up"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and release A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_up"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "deregister_callback_on_key_up",
              "args": [
                {
                  "value_type": "variable_field",
                  "variable_name": "callbacks",
                  "variable_field": "on_key_up"
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "b_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and release B to test deregistered callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "b_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_up"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "key_down",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and hold A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "key_name",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test key name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Name: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Enter to test key name"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Name: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_name",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "keypad_enter"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "key_released",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_released",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Released: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_released",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "key_typed",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test key typed"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "key_up",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and release A"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_down",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_down",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_down"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_down"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_down",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_down"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_typed",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_typed",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_typed",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Typed: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_typed",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_typed"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_typed",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_typed"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "register_callback_on_key_up",
      "steps": [
        {
          "step_type": "variable",
          "variable_name": "callbacks",
          "value_type": "class_instance",
          "class_name": "key_callbacks",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "register_callback_on_key_up",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_up"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "a_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and release A to test callback"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Key Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "key_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "key_code",
                            "value": "a_key"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Callback received: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "variable_field",
                        "variable_name": "callbacks",
                        "variable_field": "get_key_up"
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "deregister_callback_on_key_up",
          "args": [
            {
              "value_type": "variable_field",
              "variable_name": "callbacks",
              "variable_field": "on_key_up"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "hide_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "hide_mouse",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_clicked",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_clicked",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Click left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Clicked: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_clicked",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_down",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press and hold left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "not_equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Release left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Down: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_down",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_movement",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_movement",
              "args": [],
              "store_result": "movement"
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Move mouse to test movement"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_position",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_position",
              "args": [],
              "store_result": "position"
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Move mouse to test position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_position_vector",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_position_vector",
              "args": [],
              "store_result": "position"
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Move mouse to test position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_shown",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "hide_mouse",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_up",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "mouse_up",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "mouse_button",
                  "value": "left_button"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Click and release left mouse button"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Up: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_up",
                        "args": [
                          {
                            "value_type": "enum",
                            "enum_type": "mouse_button",
                            "value": "left_button"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_wheel_scroll",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "mouse_wheel_scroll",
              "args": [],
              "store_result": "scroll"
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Scroll mouse wheel to test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "$Mouse Position: X={scroll.X}"
                },
                {
                  "value_type": "primitive",
                  "value": "Y={scroll.Y}"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_x",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Move mouse to test X position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "mouse_y",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Move mouse to test Y position"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "move_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "m_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press M to move mouse to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "move_mouse",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 400
                },
                {
                  "value_type": "primitive",
                  "value": 300
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Mouse moved to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "move_mouse_to_point",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "m_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press M to move mouse to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "move_mouse_to_point",
              "args": [
                {
                  "value_type": "function",
                  "function_name": "point_at",
                  "args": [
                    {
                      "value_type": "primitive",
                      "value": 400
                    },
                    {
                      "value_type": "primitive",
                      "value": 300
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Mouse moved to center"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Position: X="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_x",
                        "args": []
                      }
                    },
                    {
                      "type": "text",
                      "value": ", Y="
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_y",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "show_mouse",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "hide_mouse",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "show_mouse_with_boolean",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "h_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press H to hide mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "show_mouse_with_boolean",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "false"
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "s_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press S to show mouse"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Mouse Shown: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "mouse_shown",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "show_mouse_with_boolean",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "true"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "draw_collected_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "load_font",
          "args": [
            {
              "value_type": "primitive",
              "value": "test_font"
            },
            {
              "value_type": "primitive",
              "value": "hara.ttf"
            }
          ],
          "store_result": "test_font"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 200
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_collected_text",
              "args": [
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "variable",
                  "variable_name": "test_font"
                },
                {
                  "value_type": "primitive",
                  "value": 18
                },
                {
                  "value_type": "function",
                  "function_name": "option_defaults",
                  "args": []
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "free_font",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_font"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "end_reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 200
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "end_reading_text",
              "args": []
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Text input ended"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "end_reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rectangle"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rectangle"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "end_reading_text_in_window",
              "args": [
                {
                  "value_type": "variable",
                  "variable_name": "test_window"
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "space_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Text input ended"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Space to end test"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 50
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 200
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rectangle"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rectangle"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Reading Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "reading_text_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "start_reading_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "start_reading_text_with_initial_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_with_initial_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            },
            {
              "value_type": "primitive",
              "value": "Initial Text"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "start_reading_text_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "start_reading_text_in_window_with_initial_text",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text_in_window_with_initial_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            },
            {
              "value_type": "primitive",
              "value": "Initial Text"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "text_entry_cancelled",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 200
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "escape_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Escape to cancel text entry"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Text Entry Cancelled: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_entry_cancelled",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "text_entry_cancelled_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "escape_key"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Press Escape to cancel text entry"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Text Entry Cancelled: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_entry_cancelled_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "text_input",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "function",
              "function_name": "rectangle_from",
              "args": [
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 100
                },
                {
                  "value_type": "primitive",
                  "value": 200
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input",
                        "args": []
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": []
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    },
    {
      "name": "text_input_in_window",
      "steps": [
        {
          "step_type": "function",
          "function_name": "open_window",
          "args": [
            {
              "value_type": "primitive",
              "value": "Test Window"
            },
            {
              "value_type": "primitive",
              "value": 800
            },
            {
              "value_type": "primitive",
              "value": 600
            }
          ],
          "store_result": "test_window"
        },
        {
          "step_type": "function",
          "function_name": "rectangle_from",
          "args": [
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 100
            },
            {
              "value_type": "primitive",
              "value": 200
            },
            {
              "value_type": "primitive",
              "value": 30
            }
          ],
          "store_result": "test_rect"
        },
        {
          "step_type": "function",
          "function_name": "start_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            },
            {
              "value_type": "variable",
              "variable_name": "test_rect"
            }
          ]
        },
        {
          "step_type": "while",
          "compare": {
            "compare_type": "equal",
            "value1": {
              "value_type": "function",
              "function_name": "key_down",
              "args": [
                {
                  "value_type": "enum",
                  "enum_type": "key_code",
                  "value": "keypad_enter"
                }
              ]
            },
            "value2": {
              "value_type": "primitive",
              "value": false
            }
          },
          "while_steps": [
            {
              "step_type": "function",
              "function_name": "process_events",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "clear_screen",
              "args": []
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "primitive",
                  "value": "Type some text"
                },
                {
                  "value_type": "primitive",
                  "value": "press Enter when done"
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 10
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "draw_text",
              "args": [
                {
                  "value_type": "interpolated_string",
                  "parts": [
                    {
                      "type": "text",
                      "value": "Current Text: "
                    },
                    {
                      "type": "interpolation",
                      "expression": {
                        "value_type": "function",
                        "function_name": "text_input_in_window",
                        "args": [
                          {
                            "value_type": "variable",
                            "variable_name": "test_window"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "value_type": "function",
                  "function_name": "color_black",
                  "args": []
                },
                {
                  "value_type": "primitive",
                  "value": 10
                },
                {
                  "value_type": "primitive",
                  "value": 30
                }
              ]
            },
            {
              "step_type": "function",
              "function_name": "refresh_screen",
              "args": []
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "end_reading_text",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        },
        {
          "step_type": "function",
          "function_name": "close_window",
          "args": [
            {
              "value_type": "variable",
              "variable_name": "test_window"
            }
          ]
        }
      ]
    }
  ]
}
